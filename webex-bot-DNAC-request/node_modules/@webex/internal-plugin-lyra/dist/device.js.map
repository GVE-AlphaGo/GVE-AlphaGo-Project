{"version":3,"sources":["device.js"],"names":["Device","WebexPlugin","extend","namespace","getAudioState","space","webex","request","method","uri","url","then","res","body","putAudioState","audioState","deviceUrl","reject","Error","mute","unmute","increaseVolume","decreaseVolume","setVolume","level"],"mappings":";;;;;;;;;;AAIA;;;;AAEA;;;;;AAKA,IAAMA,SAASC,uBAAYC,MAAZ,CAAmB;AAChCC,aAAW,MADqB;;AAGhC;;;;;;AAMAC,eATgC,yBASlBC,KATkB,EASX;AACnB,WAAO,KAAKC,KAAL,CAAWC,OAAX,CAAmB;AACxBC,cAAQ,KADgB;AAExBC,WAAQJ,MAAMK,GAAd;AAFwB,KAAnB,EAIJC,IAJI,CAIC,UAACC,GAAD;AAAA,aAASA,IAAIC,IAAb;AAAA,KAJD,CAAP;AAKD,GAf+B;;;AAiBhC;;;;;;;;;;;;;AAaAC,eA9BgC,yBA8BlBT,KA9BkB,EA8BM;AAAA,QAAjBU,UAAiB,uEAAJ,EAAI;;AACpC,QAAI,CAACA,WAAWC,SAAhB,EAA2B;AACzB,aAAO,kBAAQC,MAAR,CAAe,IAAIC,KAAJ,CAAU,kCAAV,CAAf,CAAP;AACD;;AAED,WAAO,KAAKZ,KAAL,CAAWC,OAAX,CAAmB;AACxBC,cAAQ,KADgB;AAExBC,WAAQJ,MAAMK,GAAd,WAFwB;AAGxBG,YAAME;AAHkB,KAAnB,EAKJJ,IALI,CAKC,UAACC,GAAD;AAAA,aAASA,IAAIC,IAAb;AAAA,KALD,CAAP;AAMD,GAzC+B;;;AA2ChC;;;;;;AAMAM,MAjDgC,gBAiD3Bd,KAjD2B,EAiDpB;AACV,WAAO,KAAKC,KAAL,CAAWC,OAAX,CAAmB;AACxBC,cAAQ,MADgB;AAExBC,WAAQJ,MAAMK,GAAd;AAFwB,KAAnB,CAAP;AAID,GAtD+B;;;AAwDhC;;;;;;AAMAU,QA9DgC,kBA8DzBf,KA9DyB,EA8DlB;AACZ,WAAO,KAAKC,KAAL,CAAWC,OAAX,CAAmB;AACxBC,cAAQ,MADgB;AAExBC,WAAQJ,MAAMK,GAAd;AAFwB,KAAnB,CAAP;AAID,GAnE+B;;;AAqEhC;;;;;;AAMAW,gBA3EgC,0BA2EjBhB,KA3EiB,EA2EV;AACpB,WAAO,KAAKC,KAAL,CAAWC,OAAX,CAAmB;AACxBC,cAAQ,MADgB;AAExBC,WAAQJ,MAAMK,GAAd;AAFwB,KAAnB,CAAP;AAID,GAhF+B;;;AAkFhC;;;;;;AAMAY,gBAxFgC,0BAwFjBjB,KAxFiB,EAwFV;AACpB,WAAO,KAAKC,KAAL,CAAWC,OAAX,CAAmB;AACxBC,cAAQ,MADgB;AAExBC,WAAQJ,MAAMK,GAAd;AAFwB,KAAnB,CAAP;AAID,GA7F+B;;;AA+FhC;;;;;;;AAOAa,WAtGgC,qBAsGtBlB,KAtGsB,EAsGJ;AAAA,QAAXmB,KAAW,uEAAH,CAAG;;AAC1B,WAAO,KAAKlB,KAAL,CAAWC,OAAX,CAAmB;AACxBC,cAAQ,MADgB;AAExBC,WAAQJ,MAAMK,GAAd,qCAFwB;AAGxBG,YAAM;AACJW;AADI;AAHkB,KAAnB,CAAP;AAOD,GA9G+B;AAAA;AAAA,CAAnB,CAAf,C,CAXA;;;;kBA6HexB,M","file":"device.js","sourcesContent":["/*!\n * Copyright (c) 2015-2019 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport {WebexPlugin} from '@webex/webex-core';\n\n/**\n * @class\n * @extends {Lyra}\n * @memberof Lyra\n */\nconst Device = WebexPlugin.extend({\n  namespace: 'Lyra',\n\n  /**\n   * Gets the audio state of the device\n   * @param {Types~LyraSpace} space\n   * @param {string} space.url\n   * @returns {Promise<LyraAudioState>} {volume, microphones, url}\n   */\n  getAudioState(space) {\n    return this.webex.request({\n      method: 'GET',\n      uri: `${space.url}/audio`\n    })\n      .then((res) => res.body);\n  },\n\n  /**\n   * Updates audio state for lyra device, should be called every 10 minutes or\n   * when mic or volume state is changed\n   * @param {Types~LyraSpace} space\n   * @param {string} space.url\n   * @param {Types~LyraAudioState} audioState\n   * @param {object} audioState.volume optional\n   * @param {boolean} audioState.volume.level\n   * @param {object} audioState.microphones optional\n   * @param {boolean} audioState.microphones.muted\n   * @param {string} audioState.deviceUrl\n   * @returns {Promise}\n   */\n  putAudioState(space, audioState = {}) {\n    if (!audioState.deviceUrl) {\n      return Promise.reject(new Error('audioState.deviceUrl is required'));\n    }\n\n    return this.webex.request({\n      method: 'PUT',\n      uri: `${space.url}/audio`,\n      body: audioState\n    })\n      .then((res) => res.body);\n  },\n\n  /**\n   * Mutes lyra device\n   * @param {Types~LyraSpace} space\n   * @param {string} space.url\n   * @returns {Promise}\n   */\n  mute(space) {\n    return this.webex.request({\n      method: 'POST',\n      uri: `${space.url}/audio/microphones/actions/mute/invoke`\n    });\n  },\n\n  /**\n   * Unmutes lyra device\n   * @param {Types~LyraSpace} space\n   * @param {string} space.url\n   * @returns {Promise}\n   */\n  unmute(space) {\n    return this.webex.request({\n      method: 'POST',\n      uri: `${space.url}/audio/microphones/actions/un-mute/invoke`\n    });\n  },\n\n  /**\n   * Increases lyra device's volume\n   * @param {Types~LyraSpace} space\n   * @param {string} space.url\n   * @returns {Promise}\n   */\n  increaseVolume(space) {\n    return this.webex.request({\n      method: 'POST',\n      uri: `${space.url}/audio/volume/actions/increase/invoke`\n    });\n  },\n\n  /**\n   * Decreases lyra device's volume\n   * @param {Types~LyraSpace} space\n   * @param {string} space.url\n   * @returns {Promise}\n   */\n  decreaseVolume(space) {\n    return this.webex.request({\n      method: 'POST',\n      uri: `${space.url}/audio/volume/actions/decrease/invoke`\n    });\n  },\n\n  /**\n   * Sets lyra device's volume but should use increase and decrease api instead\n   * @param {Types~LyraSpace} space\n   * @param {string} space.url\n   * @param {integer} level to be set\n   * @returns {Promise}\n   */\n  setVolume(space, level = 0) {\n    return this.webex.request({\n      method: 'POST',\n      uri: `${space.url}/audio/volume/actions/set/invoke`,\n      body: {\n        level\n      }\n    });\n  }\n\n});\n\nexport default Device;\n"]}