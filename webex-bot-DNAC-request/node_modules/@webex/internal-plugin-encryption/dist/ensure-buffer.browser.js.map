{"version":3,"sources":["ensure-buffer.browser.js"],"names":["ensureBuffer","buffer","ArrayBuffer","resolve","toArrayBuffer","reject","fr","FileReader","onload","Uint8Array","result","onerror","readAsArrayBuffer"],"mappings":";;;;;;;;;;kBAawBA,Y;;;;AAbxB;;;;AAIA;AACA;;AAEA;;;;;;AAMe,SAASA,YAAT,CAAsBC,MAAtB,EAA8B;AAC3C,MAAIA,kBAAkBC,WAAtB,EAAmC;AACjC,WAAO,kBAAQC,OAAR,CAAgBF,MAAhB,CAAP;AACD;;AAED,MAAIA,OAAOG,aAAX,EAA0B;AACxB,WAAO,kBAAQD,OAAR,CAAgBF,OAAOG,aAAP,EAAhB,CAAP;AACD;;AAED,MAAIH,OAAOA,MAAX,EAAmB;AACjB,WAAO,kBAAQE,OAAR,CAAgBF,OAAOA,MAAvB,CAAP;AACD;;AAED,SAAO,sBAAY,UAACE,OAAD,EAAUE,MAAV,EAAqB;AACtC,QAAMC,KAAK,IAAIC,UAAJ,EAAX;;AAEAD,OAAGE,MAAH,GAAY,SAASA,MAAT,GAAkB;AAC5BL,cAAQ,IAAIM,UAAJ,CAAe,KAAKC,MAApB,CAAR;AACD,KAFD;;AAIAJ,OAAGK,OAAH,GAAaN,MAAb;;AAEAC,OAAGM,iBAAH,CAAqBX,MAArB;AACD,GAVM,CAAP;AAWD","file":"ensure-buffer.browser.js","sourcesContent":["/*!\n * Copyright (c) 2015-2019 Cisco Systems, Inc. See LICENSE file.\n */\n\n/* eslint-env: browser */\n/* global FileReader */\n\n/**\n * Ensures the provider buffer is, indeed, an ArrayBuffer; converts File and\n * Blob objects to ArrayBuffers.\n * @param {mixed} buffer\n * @returns {Promise<ArrayBuffer>}\n */\nexport default function ensureBuffer(buffer) {\n  if (buffer instanceof ArrayBuffer) {\n    return Promise.resolve(buffer);\n  }\n\n  if (buffer.toArrayBuffer) {\n    return Promise.resolve(buffer.toArrayBuffer());\n  }\n\n  if (buffer.buffer) {\n    return Promise.resolve(buffer.buffer);\n  }\n\n  return new Promise((resolve, reject) => {\n    const fr = new FileReader();\n\n    fr.onload = function onload() {\n      resolve(new Uint8Array(this.result));\n    };\n\n    fr.onerror = reject;\n\n    fr.readAsArrayBuffer(buffer);\n  });\n}\n"]}